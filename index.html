<!DOCTYPE html>
<html lang="de">

<head>
	<meta charset="UTF-8">
	<title>ts.js</title>
	<meta name="description" content="Kurzbeschreibung">
	<style>
		body {
			background: #50c0ff;
		}

		#timeseries {
			display: block;
			width: 100%;
			height: 100%;
			background: #aaa;
			font: 1em Arial;
			color: black;
		}

		div {
			border: solid #000 1px;
			left: 0;
			right: 0;
			height: 500px;
		}
	</style>
	<script src="timeseries.js"></script>
	<script src="jpZabbix.js"></script>
	<script src="artificial.js"></script>
</head>

<body>
	<h1>timeseries.js</h1>
	<div id="graph" align="center">
		<canvas id="timeseries"></canvas>
        <button onclick="ts.yesterday()" title="gestern">&lt;</button>
        <button onclick="ts.today()">heute</button>
        <button onclick="ts.tomorrow()" title="morgen">&gt;</button>
    <br />
        <button onclick="ts.lastWeek()" title="letzte Woche">&lt;&lt;</button>
        <button onclick="ts.thisWeek()">diese Woche</button>
        <button onclick="ts.nextWeek()" title="nÃ¤chste Woche">&gt;&gt;</button>
	</div>
    <script defer>
        function auth(e) {
            server.api('history.get',{
                'itemids': [ 32226, 32228, 32230,],
                'time_from': Math.floor(+Date.now()/1000-3600),
                'time_till': Math.floor(+Date.now()/1000),
            }).then(ts.onZabbixData, ts.onFailure);
        }
        function failure(e) {
            console.log(e);
        }
        var server = new jpZabbix({ 'url':'http://server/api_jsonrpc.php' });
        server.setAuth('e8e814f533e3fe13172e848537525dc859c59d4db25ed804e57d65a66a148cd0').then(auth,failure);

        var ts = new TimeSeries({'sources': [server]});
        ts.onData(artificial);
    </script>
</body>
</html>
